<html>
  <head>
    <title>Datastore and Firebase Auth Example</title>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="{{ url_for('static',filename='style.css') }}"
    />
    <script src="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.js"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="https://www.gstatic.com/firebasejs/ui/4.4.0/firebase-ui-auth.css"
    />
  </head>
  <body>
    <div>
      <h1>File versioning</h1>
      <h2>{{file['name']}} in {{current_directory}}</h2>
      <h3>Total versions {{version_count}}</h3>
      <br />
      <form action="/">
        <input type="submit" value="Home" />
      </form>
      <br />
      <table>
        <tr>
          <th>Date added</th>
          <th>Version of</th>
          <th>Name</th>
        </tr>
        {% for version in file['versions']%}

        <tr>
          <td>
            <form
              action="/delete_version/{{ file['key'] }}/{{version['generation']}}"
              method="post"
            >
              <input type="submit" value="Delete" />
              {{ version['time_created'] }}
            </form>
            <form
              action="/download/{{ file['key'] }}/{{version['generation']}}"
              method="post"
            >
              <input type="submit" value="Download" />
            </form>
          </td>

          <td class="generation">{{version['generation']}}</td>
          <td class="date">{{file['name']}}</td>
        </tr>
        {%endfor%}
      </table>
    </div>
    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-auth.js"></script>
    <script src="{{ url_for('static', filename='app-setup.js') }}"></script>
  </body>
</html>
